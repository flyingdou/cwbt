<!-- 引入过滤器 -->
<wxs module="filter" src="../../utils/filters.wxs"></wxs>
<!-- 登录页面 -->
<view class = 'login' wx:if='{{isLogin}}'>
  <!-- 填充高度 -->
  <view style='height: 80rpx;'></view>

  <!-- logo -->
  <view class='banner'>
    <image src='{{logo}}' mode='aspectFill'></image>
  </view>

  <!-- 填充高度 --> 
  <view style='height: 80rpx;'></view>

  <!-- 表单 -->
  <view class='form'>
    <!-- 填充高度 -->
    <view style='height: 100rpx;'></view>
    <!-- 账号输入框 -->
    <view class='form-line'>
      <image class='account-icon' src='../../icon/zhanghao@2x.png' mode='widthFix'></image>
      <input type='number' class='form-input' placeholder='请输入手机号码' bindinput='checkAccountWechatId' data-key='account' value='{{account}}'></input>
      <view class='operator-icon' bindtap='clearAccount' wx:if='{{account}}'>
        <image class='right-icon' src='../../icon/del.png' mode='widthFix'></image>
      </view>
    </view>
    <!-- 密码输入框 -->
    <view class='form-line'>
      <image class='password-icon' src='../../icon/mima@2x.png' mode='widthFix'></image>
      <input type='password' class='form-input' placeholder='请输入密码' bindinput='saveFormParam' data-key='password' value='{{password}}' hidden='{{lookPassword}}'></input>
      <input type='input' class='form-input' placeholder='请输入密码' bindinput='saveFormParam' data-key='password' value='{{password}}' hidden='{{!lookPassword}}'></input>
      <view class='operator-icon' bindtap='lookPassword' wx:if='{{password}}'>
        <image class='right-icon' src='../../icon/look.png' mode='widthFix' hidden='{{lookPassword}}'></image>
        <image class='right-icon' src='../../icon/look_active.png' mode='widthFix' hidden='{{!lookPassword}}'></image>
      </view>
    </view>
    <!-- 填充高度 -->
    <view style='height: 70rpx;'></view>
    <!-- 登录按钮 -->
    <view class='from-button' bindtap='login' wx:if='{{!isGetUserInfo}}'>登录</view>
    <view class='from-button' wx:if='{{isGetUserInfo}}'>
      登录
      <button class='open-button' open-type='getUserInfo' bindgetuserinfo='login'></button>
    </view>
  </view>
</view>

<!-- 船员操作首页 -->
<view class = 'content' wx:if = '{{!isLogin}}'>
  <!-- 顶部背景 -->
  <view class='background'></view>
  <!-- 操作按钮块 -->
  <view class='blocks' wx:for = '{{blocksDiv}}' wx:for-item = 'blockDiv'>

    <!-- wx:if='{{userPriv == 3}}' -->
    <view class='block' wx:for = '{{blockDiv}}' bindtap='{{item.fun}}' data-link='{{item.link}}' data-key = '{{item.pkey}}' data-value = '{{item.pvalue}}' data-userpriv = '{{item.userPriv}}' data-message='功能暂无！'>
      <image class='block-icon' src='{{item.iconPath}}' mode='widthFix'></image>
      <view class='block-text'>{{item.name}}</view>
      <view class='block-count' wx:if = '{{item.count}}'>{{filter.toFixed(workCount[item.count], 0)}}</view>
    </view>

    <!--  wx:if='{{userPriv == 3}}' -->
    <!-- <view class='block' bindtap='goto' data-link='../switch/switch' data-key = 'choose' data-value = 'chooseTemp' data-message='功能暂无！'>
      <image class='block-icon' src='../../icon/2917@2x.png' mode='widthFix'></image>
      <view class='block-text'>临时任务</view>
      <view class='block-count'>{{filter.toFixed(workCount.temporaryWorkCount, 0)}}</view>
    </view> -->

     <!-- wx:if='{{userPriv == 3}}' -->
    <!-- <view class='block' bindtap='goto' data-link='../supervisionList/supervisionList' data-message='功能暂无！'>
      <image class='block-icon' src='../../icon/supervision.png' mode='widthFix'></image>
      <view class='block-text'>督导通知</view>
      <view class='block-count'>{{filter.toFixed(workCount.supervisionCount, 0)}}</view>
    </view> -->

  </view>

  <!-- <view class='blocks'>
        <view class='block' bindtap='goto' data-link='../../pages/validList/validList' data-message='功能暂无！' >
          <image class='block-icon' src='../../icon/valid.png' mode='widthFix'></image>
          <view class='block-text'>工作验收</view>
          <view class='block-count'>{{filter.toFixed(workCount.checkAcceptanceCount, 0)}}</view>
        </view>


        <view class='block' bindtap='goto' data-link='../switch/switch' data-key = 'choose' data-value = 'chooseTemp2' data-message='功能暂无！'>
          <image class='block-icon' src='../../icon/tempWork.png' mode='widthFix'></image>
          <view class='block-text'>临时工作</view>
          <view class='block-count'>{{filter.toFixed(workCount.mtwcCount, 0)}}</view>
        </view>


        <view class='block' bindtap='goto' data-link='../supervisionList/supervisionList' data-message='功能暂无！'>
          <image class='block-icon' src='../../icon/supervise.png' mode='widthFix'></image>
          <view class='block-text'>督导</view>
          <view class='block-count'>{{filter.toFixed(workCount.supervisionCount, 0)}}</view>
        </view>
  </view> -->

   <!-- <view class='blocks'>
        <view class='block' bindtap='goto' data-link='../../pages/Tlist/Tlist?isUpdate=true' data-message='功能暂无！' >
          <image class='block-icon' src='../../icon/2918@2x.png' mode='widthFix'></image>
          <view class='block-text'>未验收工作</view>
        </view>


        <view class='block' bindtap='getEquipmentInfo' data-link='../../pages/equipmentInfo/equipmentInfo' data-message='功能暂无！'>
          <image class='block-icon' src='../../icon/deviceDetail.png' mode='widthFix'></image>
          <view class='block-text'>查看设备信息</view>
        </view>


        <view class='block' bindtap='goto' data-link='../switch/switch' data-key = 'choose' data-value = 'chooseStatistics' data-message='功能暂无！'>
          <image class='block-icon' src='../../icon/statistics.png' mode='widthFix'></image>
          <view class='block-text'>统计</view>
        </view>
  </view> -->

  <!-- 填充高度 -->
  <view style='height: 120rpx;'></view>
  <!-- 底部图片 -->
  <view class='pics'>
    <image src='{{logo}}'></image>
  </view>
</view>